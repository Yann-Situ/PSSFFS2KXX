[gd_scene load_steps=24 format=3 uid="uid://dgjpons7cu2id"]

[ext_resource type="PackedScene" uid="uid://b5emf4je4tnag" path="res://src/Levels/Room2D.tscn" id="1"]
[ext_resource type="PackedScene" path="res://src/Levels/Portal.tscn" id="2"]
[ext_resource type="PackedScene" path="res://src/Items/Balls/Ball.tscn" id="3"]
[ext_resource type="PackedScene" path="res://src/Items/Balls/BallShock.tscn" id="4"]
[ext_resource type="PackedScene" path="res://src/Items/Interactive/DashTarget.tscn" id="5"]
[ext_resource type="Shader" path="res://assets/shader/fog.gdshader" id="6"]
[ext_resource type="PackedScene" path="res://src/Items/Balls/BallDash.tscn" id="7"]
[ext_resource type="Texture2D" uid="uid://boi3pgcflmp6r" path="res://assets/art/environment/chain0.png" id="8"]
[ext_resource type="PackedScene" path="res://src/Items/Environment/ParabolaCatenary.tscn" id="9"]
[ext_resource type="PackedScene" path="res://src/Items/Interactive/GraffSpray.tscn" id="10"]
[ext_resource type="PackedScene" path="res://src/Characters/NPC/PedestrianGenerator.tscn" id="11"]
[ext_resource type="Resource" uid="uid://b5t6nuxuv7s86" path="res://src/Characters/NPC/PaletteSampler1.tres" id="12"]
[ext_resource type="PackedScene" path="res://src/Items/Balls/BallBoum.tscn" id="13"]

[sub_resource type="Gradient" id="1"]
resource_local_to_scene = true
colors = PackedColorArray(0.734375, 0.700668, 0.599548, 1, 0.566406, 0.548775, 0.433655, 1)

[sub_resource type="GradientTexture2D" id="2"]
resource_local_to_scene = true
gradient = SubResource("1")
width = 516

[sub_resource type="FastNoiseLite" id="3"]

[sub_resource type="NoiseTexture2D" id="10"]
seamless = true
noise = SubResource("3")

[sub_resource type="ShaderMaterial" id="5"]
shader = ExtResource("6")
shader_parameter/octaves = 5
shader_parameter/starting_amplitude = 0.407
shader_parameter/starting_frequency = 0.381
shader_parameter/shift = -0.204
shader_parameter/velocity = Vector2(1.2, 0)
shader_parameter/fog_color = Color(0.494118, 0.309804, 0.0627451, 1)
shader_parameter/noise = SubResource("10")

[sub_resource type="Environment" id="6"]
resource_local_to_scene = true
background_mode = 4
glow_enabled = true
glow_intensity = 0.96
glow_strength = 1.01
glow_bloom = 0.01
glow_blend_mode = 1
glow_hdr_threshold = 0.95
glow_hdr_scale = 0.98
glow_hdr_luminance_cap = 1.0
adjustment_enabled = true
adjustment_contrast = 1.08
adjustment_saturation = 1.01

[sub_resource type="Curve2D" id="Curve2D_q4f4d"]
resource_local_to_scene = true
_data = {
"points": PackedVector2Array(0, 0, 0, 0, 256, 120, 0, 0, 0, 0, -120, 16)
}
point_count = 2

[sub_resource type="Curve2D" id="Curve2D_6e7oa"]
resource_local_to_scene = true
_data = {
"points": PackedVector2Array(0, 0, 0, 0, 248, 16, 0, 0, 0, 0, -120, 16)
}
point_count = 2

[sub_resource type="Animation" id="9"]
resource_name = "calm"
length = 2.0
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("ParallaxForeground/ParallaxLayer5/Fog:material:shader_param/starting_amplitude")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 2),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [0.414, 0.0]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("ParallaxBackground/ParallaxLayer3:modulate")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0, 2),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [Color(0.67451, 0.65098, 0.552941, 1), Color(0.776471, 0.576471, 0.498039, 1)]
}
tracks/2/type = "value"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("ParallaxBackground/ParallaxLayer4:modulate")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(0, 2),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [Color(0.529412, 0.505882, 0.443137, 1), Color(0.652344, 0.459018, 0.354202, 1)]
}
tracks/3/type = "value"
tracks/3/imported = false
tracks/3/enabled = true
tracks/3/path = NodePath("WorldEnvironment:environment:glow_strength")
tracks/3/interp = 1
tracks/3/loop_wrap = true
tracks/3/keys = {
"times": PackedFloat32Array(0, 2),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [1.01, 1.2]
}
tracks/4/type = "value"
tracks/4/imported = false
tracks/4/enabled = true
tracks/4/path = NodePath("WorldEnvironment:environment:glow_bloom")
tracks/4/interp = 1
tracks/4/loop_wrap = true
tracks/4/keys = {
"times": PackedFloat32Array(0, 2),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [0.01, 0.02]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_m5lmj"]
_data = {
"calm": SubResource("9")
}

[node name="RoomExample1" instance=ExtResource("1")]
limit_left = -432
limit_top = -640
limit_right = 1024

[node name="Map@FrontEnvironment@BallDash" parent="." index="0" instance=ExtResource("7")]
position = Vector2(-176, -328)

[node name="Portal1" parent="Portals" index="0" instance=ExtResource("2")]
position = Vector2(-32, -32)
portal_type = 0
transition_speed = 1.5

[node name="Portal2" parent="Portals" index="1" instance=ExtResource("2")]
position = Vector2(160, -32)
portal_type = 1
next_room = "res://src/Levels/LevelExample/RoomExample2.tscn"
next_room_portal = "Portal2"
transition_color = Color(0.317647, 0, 0.352941, 1)
transition_speed = 1.5

[node name="TextureRect" parent="ParallaxBackground/ParallaxLayer" index="0"]
offset_left = -50.0
offset_top = 450.0
offset_right = 450.0
offset_bottom = 1350.0
texture = SubResource("2")

[node name="ParallaxLayer3" parent="ParallaxBackground" index="2"]
modulate = Color(0.67451, 0.65098, 0.552941, 1)

[node name="ParallaxLayer4" parent="ParallaxBackground" index="3"]
modulate = Color(0.529412, 0.505882, 0.443137, 1)

[node name="Fog" type="ColorRect" parent="ParallaxForeground/ParallaxLayer5" index="0"]
material = SubResource("5")
offset_left = -984.0
offset_top = -851.0
offset_right = 1192.0
offset_bottom = 389.0
pivot_offset = Vector2(696, 272)
mouse_filter = 2

[node name="CanvasModulate" parent="Map" index="0"]
visible = true
color = Color(0.921569, 0.917647, 0.831373, 1)

[node name="Ball" parent="Environment/Balls" index="0" instance=ExtResource("3")]
position = Vector2(80, -16)

[node name="BallShock" parent="Environment/Balls" index="1" instance=ExtResource("4")]
z_index = 11
position = Vector2(-232, -104)
collision_layer = 4
collision_mask = 6
damage_destruction_threshold = 3.0

[node name="WorldEnvironment" parent="." index="6"]
environment = SubResource("6")

[node name="ParabolaCatenary" parent="." index="7" instance=ExtResource("9")]
z_index = 300
position = Vector2(312, -328)
curve = SubResource("Curve2D_q4f4d")
p0_slope = 1.7
line_width = 7.438
line_modulate = Color(0.329412, 0.329412, 0.329412, 1)
line_texture = ExtResource("8")

[node name="ParabolaCatenary2" parent="." index="8" instance=ExtResource("9")]
z_index = 300
position = Vector2(240, -328)
curve = SubResource("Curve2D_6e7oa")
p0_slope = 1.3
line_width = 7.438
line_modulate = Color(0.329412, 0.329412, 0.329412, 1)
line_texture = ExtResource("8")

[node name="PlayerPosition" parent="." index="9"]
position = Vector2(-96, -32)

[node name="PedestrianGenerator" parent="." index="10" instance=ExtResource("11")]
position = Vector2(-48, -32)
x_radius = 400.0
palette_scheme_sampler = ExtResource("12")

[node name="GraffSpray" parent="." index="11" instance=ExtResource("10")]
position = Vector2(288, -24)
color = Color(0.054902, 0.568627, 0.941176, 1)

[node name="GraffSpray2" parent="." index="12" instance=ExtResource("10")]
position = Vector2(248, -24)
color = Color(1, 0, 0.890196, 1)

[node name="GraffSpray4" parent="." index="13" instance=ExtResource("10")]
position = Vector2(416, -284)
color = Color(0.890196, 0.717647, 0.0470588, 1)

[node name="GraffSpray5" parent="." index="14" instance=ExtResource("10")]
position = Vector2(-361, -376)
color = Color(0.682353, 0.682353, 0.682353, 1)

[node name="GraffSpray6" parent="." index="15" instance=ExtResource("10")]
position = Vector2(-399, -29)
color = Color(0.239216, 0.172549, 0.172549, 1)

[node name="GraffSpray3" parent="." index="16" instance=ExtResource("10")]
position = Vector2(328, -24)
color = Color(0.0862745, 0.603922, 0.411765, 1)

[node name="BallBoum" parent="." index="17" instance=ExtResource("13")]
position = Vector2(-192, -64)

[node name="BallBoum2" parent="." index="18" instance=ExtResource("13")]
position = Vector2(-192, -96)

[node name="DashTarget" parent="." index="19" instance=ExtResource("5")]
position = Vector2(314, -151)

[node name="DashTarget" parent="DashTarget" index="4" instance=ExtResource("5")]
position = Vector2(-490, -215)

[node name="RoomAnimations" parent="." index="20"]
libraries = {
"": SubResource("AnimationLibrary_m5lmj")
}
