[gd_scene load_steps=45 format=3 uid="uid://d1vmfw2uc4eox"]

[ext_resource type="Script" path="res://src/Levels/Room2D.gd" id="1"]
[ext_resource type="PackedScene" uid="uid://yco4prlcetlu" path="res://src/Items/Balls/BallBoum.tscn" id="3"]
[ext_resource type="PackedScene" path="res://src/Items/Dynamics/PipeBall.tscn" id="4"]
[ext_resource type="PackedScene" uid="uid://cxn2m3havcmil" path="res://src/Items/Balls/Ball.tscn" id="5"]
[ext_resource type="Texture2D" uid="uid://b4ydi56jhjt5p" path="res://assets/art/background/ShopBackground2.png" id="6"]
[ext_resource type="Texture2D" uid="uid://b8cfr623fwqvh" path="res://assets/art/background/pixelBackground3.png" id="7"]
[ext_resource type="Texture2D" uid="uid://bkmlsn4n074ia" path="res://assets/art/background/ShopBackground4.png" id="8"]
[ext_resource type="PackedScene" uid="uid://c4ein3aak14an" path="res://src/Items/Balls/BallFire.tscn" id="11"]
[ext_resource type="PackedScene" path="res://src/Items/Interactive/DashTarget.tscn" id="14"]
[ext_resource type="PackedScene" path="res://src/Items/Dynamics/Jumper.tscn" id="15"]
[ext_resource type="Texture2D" uid="uid://dlxo8jxb21u55" path="res://assets/art/effects/light5_4.png" id="16"]
[ext_resource type="Texture2D" uid="uid://dph4cpsym7lcb" path="res://assets/art/effects/light5_5.png" id="17"]
[ext_resource type="Texture2D" uid="uid://bcxflf7dbeb4w" path="res://assets/art/effects/light5_1.png" id="18"]
[ext_resource type="PackedScene" path="res://src/Items/Activables/Spawner.tscn" id="19"]
[ext_resource type="PackedScene" path="res://src/Items/Activables/Button0.tscn" id="20"]
[ext_resource type="PackedScene" uid="uid://0oao7gw1q1bh" path="res://src/Items/Dynamics/ZipLine.tscn" id="21"]
[ext_resource type="Texture2D" uid="uid://b41scft6p0qto" path="res://assets/art/effects/light5_3.png" id="22"]
[ext_resource type="Texture2D" uid="uid://pcstif3roi0k" path="res://assets/art/effects/light5_2.png" id="23"]
[ext_resource type="PackedScene" uid="uid://imtw5v2qrplf" path="res://src/Items/Balls/BallBouncy.tscn" id="25"]
[ext_resource type="PackedScene" uid="uid://bjy7nt7bd313e" path="res://src/Items/Balls/BallBubble.tscn" id="26"]
[ext_resource type="PackedScene" uid="uid://clducx30br87q" path="res://src/Items/Balls/BallRolling.tscn" id="27"]
[ext_resource type="PackedScene" uid="uid://8alv0hbdmh5e" path="res://src/Items/Balls/BallMetal.tscn" id="28"]
[ext_resource type="Texture2D" uid="uid://b4meqionddno3" path="res://assets/art/effects/light3.png" id="29"]
[ext_resource type="PackedScene" uid="uid://cjv8hfeex2clu" path="res://src/Items/Dynamics/RailLine.tscn" id="33"]
[ext_resource type="PackedScene" path="res://src/Items/Interactive/BreakableBloc.tscn" id="35"]
[ext_resource type="PackedScene" path="res://src/Items/Interactive/Door.tscn" id="37"]
[ext_resource type="PackedScene" uid="uid://27jkgoi43hoq" path="res://src/Items/Balls/BallShock.tscn" id="44"]
[ext_resource type="PackedScene" uid="uid://cjbsx2kbm5qhk" path="res://src/Player/PlayerPosition.tscn" id="45"]
[ext_resource type="PackedScene" uid="uid://cd2wyj207og8s" path="res://src/Items/Balls/BallDash.tscn" id="47"]
[ext_resource type="PackedScene" path="res://src/Items/Interactive/Wind.tscn" id="48"]

[sub_resource type="Gradient" id="1"]
offsets = PackedFloat32Array(0, 0.565574, 1)
colors = PackedColorArray(1.25, 1.03, 0.8, 1, 1, 0.600525, 0.335938, 1, 1, 0.265625, 0.592651, 1)

[sub_resource type="GradientTexture2D" id="2"]
gradient = SubResource("1")
width = 516

[sub_resource type="ShaderMaterial" id="3"]

[sub_resource type="Curve2D" id="13"]
_data = {
"points": PackedVector2Array(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, -24, 0, 0, 0, 0, 0, -24, 48, 0, 0, 0, 0, -80, 48, 0, 0, 0, 0, -88, 48, 0, 0, 0, 0, -88, -144, 0, 0, 0, 0, -168, -144, 0, 0, 0, 0, -168, -32, 0, 0, 0, 0, -152, -32, 0, 0, 0, 0, -152, 48, 0, 0, 0, 0, -216, 48, 0, 0, 0, 0, -216, 16, 0, 0, 0, 0, -232, 16, 0, 0, 0, 0, -232, 0, 0, 0, 0, 0, -264, 0, 0, 0, 0, 0, -264, 48, 0, 0, 0, 0, -304, 48)
}
point_count = 17

[sub_resource type="Curve2D" id="14"]
_data = {
"points": PackedVector2Array(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, -40, 0, 0, 0, 0, 0, -40, 96, 0, 0, 0, 0, 24, 96, 0, 0, 0, 0, 24, 192, 0, 0, 0, 0, 24, 256, 0, 0, 0, 0, 64, 256)
}
point_count = 7

[sub_resource type="Curve2D" id="15"]
_data = {
"points": PackedVector2Array(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, -120)
}
point_count = 2

[sub_resource type="Curve2D" id="16"]
_data = {
"points": PackedVector2Array(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, -24, 0, 0, 0, 0, -32, -24, 0, 0, 0, 0, -32, 24, 0, 0, 0, 0, -96, 24, 0, 0, 0, 0, -96, -152, 0, 0, 0, 0, -240, -152, 0, 0, 0, 0, -240, -232, 0, 0, 0, 0, -32, -232, 0, 0, 0, 0, -32, -192)
}
point_count = 10

[sub_resource type="Curve2D" id="Curve2D_dyhel"]
resource_local_to_scene = true
_data = {
"points": PackedVector2Array(0, 0, 0, 0, 288, 120, 0, 0, 0, 0, 0, -8)
}
point_count = 2

[sub_resource type="Curve2D" id="Curve2D_cxp1a"]
resource_local_to_scene = true
_data = {
"points": PackedVector2Array(0, 0, 0, 0, 704, -240, 0, 0, 0, 0, 616, -24, 0, 0, 0, 0, 464, 88, 0, 0, 0, 0, 152, 112, 0, 0, 0, 0, 16, 80)
}
point_count = 5

[sub_resource type="Curve2D" id="Curve2D_njh4a"]
resource_local_to_scene = true
_data = {
"points": PackedVector2Array(0, 0, 0, 0, 216, -296, 0, 0, 0, 0, 272, -48, 0, 0, 0, 0, 416, 64, 0, 0, 0, 0, 704, 72)
}
point_count = 4

[sub_resource type="Curve2D" id="Curve2D_pwxwq"]
resource_local_to_scene = true
_data = {
"points": PackedVector2Array(0, 0, 0, 0, 600, -72, 0, 0, 0, 0, 432, -32, 0, 0, 0, 0, 280, -32)
}
point_count = 3

[sub_resource type="Curve2D" id="Curve2D_qhsvi"]
resource_local_to_scene = true
_data = {
"points": PackedVector2Array(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 576, 0)
}
point_count = 2

[sub_resource type="Environment" id="22"]
background_mode = 4
glow_enabled = true
glow_intensity = 0.96
glow_strength = 1.01
glow_bloom = 0.01
glow_blend_mode = 1
glow_hdr_threshold = 0.95
glow_hdr_scale = 0.98
glow_hdr_luminance_cap = 1.0
adjustment_enabled = true
adjustment_contrast = 1.08
adjustment_saturation = 1.01

[sub_resource type="AnimatedTexture" id="23"]
frames = 5
frame_0/texture = ExtResource("18")
frame_1/texture = ExtResource("23")
frame_1/duration = 1.0
frame_2/texture = ExtResource("22")
frame_2/duration = 1.0
frame_3/texture = ExtResource("16")
frame_3/duration = 1.0
frame_4/texture = ExtResource("17")
frame_4/duration = 1.0

[node name="main" type="Node2D"]
script = ExtResource("1")

[node name="Portals" type="Node2D" parent="."]

[node name="ParallaxBackground" type="ParallaxBackground" parent="."]
layer = -10

[node name="ParallaxLayer" type="ParallaxLayer" parent="ParallaxBackground"]
motion_scale = Vector2(0, 0)
motion_offset = Vector2(-400, -228)

[node name="TextureRect" type="TextureRect" parent="ParallaxBackground/ParallaxLayer"]
offset_left = -2.0
offset_top = 458.0
offset_right = 454.0
offset_bottom = 1270.0
rotation = -89.9999
mouse_filter = 2
texture = SubResource("2")
expand_mode = 1
stretch_mode = 2

[node name="ParallaxLayer2" type="ParallaxLayer" parent="ParallaxBackground"]
visible = false
motion_scale = Vector2(0.08, 0)
motion_offset = Vector2(0, -30)
motion_mirroring = Vector2(1024, 512)

[node name="TextureRect" type="TextureRect" parent="ParallaxBackground/ParallaxLayer2"]
modulate = Color(1, 0.847059, 0.847059, 1)
offset_top = -256.0
offset_right = 1024.0
offset_bottom = 260.0
mouse_filter = 2
texture = ExtResource("7")

[node name="ParallaxLayer3" type="ParallaxLayer" parent="ParallaxBackground"]
modulate = Color(0.678431, 0.368627, 0.505882, 1)
motion_scale = Vector2(0.15, 0.15)
motion_offset = Vector2(0, -80)
motion_mirroring = Vector2(2048, 0)

[node name="TextureRect" type="TextureRect" parent="ParallaxBackground/ParallaxLayer3"]
offset_left = 5.3454
offset_top = -100.076
offset_right = 2053.35
offset_bottom = 415.924
mouse_filter = 2
texture = ExtResource("8")

[node name="ColorRect" type="ColorRect" parent="ParallaxBackground/ParallaxLayer3"]
offset_top = 259.0
offset_right = 2048.0
offset_bottom = 524.0
mouse_filter = 2
color = Color(0.964706, 0.964706, 0.964706, 1)

[node name="ParallaxLayer4" type="ParallaxLayer" parent="ParallaxBackground"]
modulate = Color(0.564706, 0.270588, 0.4, 1)
light_mask = -2147483647
motion_scale = Vector2(0.3, 0.3)
motion_mirroring = Vector2(2300, 0)

[node name="TextureRect" type="TextureRect" parent="ParallaxBackground/ParallaxLayer4"]
offset_top = -476.0
offset_right = 2176.0
offset_bottom = 548.0
mouse_filter = 2
texture = ExtResource("6")

[node name="ParallaxForeground" type="ParallaxBackground" parent="."]
layer = 10

[node name="ParallaxLayer5" type="ParallaxLayer" parent="ParallaxForeground"]
light_mask = -2147483647
z_index = 21
z_as_relative = false
motion_scale = Vector2(1.2, 1.2)

[node name="Map" type="Node2D" parent="."]
z_as_relative = false
material = SubResource("3")

[node name="CanvasModulate" type="CanvasModulate" parent="Map"]
visible = false
z_index = -82
color = Color(0.109375, 0, 0.0512695, 1)

[node name="Environment" type="Node2D" parent="."]

[node name="Activables" type="Node2D" parent="Environment"]
z_as_relative = false
position = Vector2(0, -2)

[node name="Button0" parent="Environment/Activables" instance=ExtResource("20")]
position = Vector2(600, -94)

[node name="Button1" parent="Environment/Activables" instance=ExtResource("20")]
position = Vector2(456, -94)
button_type = 1

[node name="Spawner" parent="Environment/Activables" instance=ExtResource("19")]
position = Vector2(752, 82)
rotation = -1.57079
initial_velocity = Vector2(-200, -20)
nb_max_balls = 4

[node name="Spawner2" parent="Environment/Activables" instance=ExtResource("19")]
position = Vector2(560, -48)
rotation = -3.14159
ball = ExtResource("3")

[node name="Button2" parent="Environment/Activables" instance=ExtResource("20")]
position = Vector2(640, -94)
button_type = 2

[node name="Button3" parent="Environment/Activables" instance=ExtResource("20")]
position = Vector2(368, 546)
button_type = 2

[node name="Button4" parent="Environment/Activables" instance=ExtResource("20")]
position = Vector2(1168, 226)
button_type = 1

[node name="Button5" parent="Environment/Activables" instance=ExtResource("20")]
position = Vector2(1216, 226)
button_type = 1

[node name="Button6" parent="Environment/Activables" instance=ExtResource("20")]
position = Vector2(1200, 98)
button_type = 1

[node name="Button7" parent="Environment/Activables" instance=ExtResource("20")]
position = Vector2(1168, 354)
button_type = 1

[node name="Spawner3" parent="Environment/Activables" instance=ExtResource("19")]
position = Vector2(1104, 786)
ball = ExtResource("11")
initial_velocity = Vector2(0, -900)

[node name="Balls" type="Node2D" parent="Environment"]

[node name="BallFire" parent="Environment/Balls" instance=ExtResource("11")]
light_mask = 1
position = Vector2(1104, 568)
collision_mask = 6
physics_enabled = false

[node name="Ball" parent="Environment/Balls" instance=ExtResource("5")]
position = Vector2(1856, 336)

[node name="Ball2" parent="Environment/Balls" instance=ExtResource("5")]
position = Vector2(2464, -608)

[node name="Ball3" parent="Environment/Balls" instance=ExtResource("5")]
position = Vector2(2232, -608)

[node name="BallBubble" parent="Environment/Balls" instance=ExtResource("26")]
light_mask = 1
position = Vector2(728, 528)
collision_mask = 6

[node name="BallBubble2" parent="Environment/Balls" instance=ExtResource("26")]
light_mask = 1
position = Vector2(688, 48)
collision_mask = 6

[node name="BallBouncy" parent="Environment/Balls" instance=ExtResource("25")]
light_mask = 1
position = Vector2(1312, 432)
collision_mask = 6

[node name="BallBoum" parent="Environment/Balls" instance=ExtResource("3")]
light_mask = 1
position = Vector2(2184, 520)
collision_mask = 6

[node name="BallBoum2" parent="Environment/Balls" instance=ExtResource("3")]
light_mask = 1
position = Vector2(-192, 504)
collision_mask = 6

[node name="BallBoum3" parent="Environment/Balls" instance=ExtResource("3")]
light_mask = 1
position = Vector2(320, 696)
collision_mask = 6

[node name="BallBoum4" parent="Environment/Balls" instance=ExtResource("3")]
light_mask = 1
position = Vector2(960, 368)
collision_mask = 6

[node name="BallRolling" parent="Environment/Balls" instance=ExtResource("27")]
light_mask = 1
position = Vector2(1168, 520)
collision_mask = 6

[node name="BallMetal" parent="Environment/Balls" instance=ExtResource("28")]
light_mask = 1
position = Vector2(1536, 520)
collision_mask = 6

[node name="BallMetal4" parent="Environment/Balls" instance=ExtResource("28")]
light_mask = 1
position = Vector2(2400, -616)
collision_mask = 6

[node name="BallMetal2" parent="Environment/Balls" instance=ExtResource("28")]
light_mask = 1
position = Vector2(2456, 536)
collision_mask = 6

[node name="BallMetal3" parent="Environment/Balls" instance=ExtResource("28")]
light_mask = 1
position = Vector2(-576, -616)
collision_mask = 6

[node name="BallShock" parent="Environment/Balls" instance=ExtResource("44")]
light_mask = 1
position = Vector2(936, 376)
collision_mask = 6

[node name="BallDash" parent="Environment/Balls" instance=ExtResource("47")]
position = Vector2(832, 248)

[node name="Baskets" type="Node2D" parent="Environment"]

[node name="Dynamics" type="Node2D" parent="Environment"]
z_index = 2

[node name="Jumper" parent="Environment/Dynamics" instance=ExtResource("15")]
position = Vector2(840, -72)
rotation = 0.785397
cant_go_time = 1.0

[node name="ZipLine" parent="Environment/Dynamics" instance=ExtResource("21")]
position = Vector2(-248, -216)
final_point = Vector2(2000, 200)

[node name="ZipLine2" parent="Environment/Dynamics" instance=ExtResource("21")]
position = Vector2(288, 152)
zipline_type = 1
final_point = Vector2(510, 140)
handle_catch_radius = 20.0

[node name="Jumper2" parent="Environment/Dynamics" instance=ExtResource("15")]
position = Vector2(-112, 544)
jump_velocity = 800

[node name="PipeBall" parent="Environment/Dynamics" instance=ExtResource("4")]
position = Vector2(688, 88)
curve = SubResource("13")
speed_at_exit = 902.723
speed_inside = 217.805
activated = false

[node name="PipeBall2" parent="Environment/Dynamics" instance=ExtResource("4")]
position = Vector2(272, 504)
curve = SubResource("14")
speed_at_exit = 258.31
speed_inside = 241.274
activated = false

[node name="PipeBall3" parent="Environment/Dynamics" instance=ExtResource("4")]
position = Vector2(728, 656)
curve = SubResource("15")
speed_at_exit = 426.215
speed_inside = 388.973
activated = false

[node name="PipeBall4" parent="Environment/Dynamics" instance=ExtResource("4")]
z_index = 160
position = Vector2(728, 144)
curve = SubResource("16")
speed_at_exit = 327.978
speed_inside = 327.978
pipe_z = 1
activated = false

[node name="TrailLine" parent="Environment/Dynamics" instance=ExtResource("33")]
position = Vector2(1472, 232)
curve = SubResource("Curve2D_dyhel")
invert_line_direction = true

[node name="TrailLine2" parent="Environment/Dynamics" instance=ExtResource("33")]
position = Vector2(1440, -336)
curve = SubResource("Curve2D_cxp1a")
invert_line_direction = true

[node name="TrailLine3" parent="Environment/Dynamics" instance=ExtResource("33")]
position = Vector2(1008, -192)
curve = SubResource("Curve2D_njh4a")

[node name="TrailLine4" parent="Environment/Dynamics" instance=ExtResource("33")]
position = Vector2(1544, -40)
curve = SubResource("Curve2D_pwxwq")
invert_line_direction = true

[node name="RailLine" parent="Environment/Dynamics" instance=ExtResource("33")]
position = Vector2(192, 384)
curve = SubResource("Curve2D_qhsvi")

[node name="Interactive" type="Node2D" parent="Environment"]

[node name="Door2" parent="Environment/Interactive" instance=ExtResource("37")]
position = Vector2(1192, 192)

[node name="BreakableBloc4" parent="Environment/Interactive" instance=ExtResource("35")]
position = Vector2(784, 400)
content = ExtResource("15")

[node name="BreakableBloc8" parent="Environment/Interactive" instance=ExtResource("35")]
position = Vector2(976, 400)
content = ExtResource("3")

[node name="DashTarget" parent="Environment/Interactive" instance=ExtResource("14")]
position = Vector2(256, 368)

[node name="DashTarget3" parent="Environment/Interactive" instance=ExtResource("14")]
position = Vector2(704, 368)

[node name="DashTarget4" parent="Environment/Interactive" instance=ExtResource("14")]
position = Vector2(896, 160)

[node name="DashTarget2" parent="Environment/Interactive" instance=ExtResource("14")]
position = Vector2(1776, 336)

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("22")

[node name="PointLight2D" type="PointLight2D" parent="."]
z_index = 9
z_as_relative = false
position = Vector2(848, 720)
color = Color(1, 0.901961, 0.709804, 1)
energy = 0.4
range_z_max = 90
shadow_enabled = true
texture = SubResource("23")
texture_scale = 2.56

[node name="Light2D2" type="PointLight2D" parent="."]
z_as_relative = false
position = Vector2(-336, 192)
color = Color(1, 0.901961, 0.709804, 1)
energy = 0.6
range_z_max = 90
shadow_enabled = true
texture = SubResource("23")
texture_scale = 2.56

[node name="sun" type="PointLight2D" parent="."]
visible = false
z_as_relative = false
position = Vector2(800, -1472)
scale = Vector2(54.2196, 54.2196)
color = Color(1, 0.933333, 0.803922, 1)
energy = 0.95
range_z_max = 16
shadow_enabled = true
shadow_color = Color(0.113725, 0.0156863, 0.168627, 0.0509804)
shadow_filter = 1
shadow_filter_smooth = 30.0
texture = ExtResource("29")
texture_scale = 2.56

[node name="Light2D5" type="PointLight2D" parent="."]
z_as_relative = false
position = Vector2(1880, 576)
scale = Vector2(1.99752, 1.99752)
color = Color(1, 0.901961, 0.709804, 1)
energy = 0.81
range_z_max = 130
range_item_cull_mask = 4
shadow_enabled = true
texture = SubResource("23")
texture_scale = 2.56

[node name="PlayerPosition" parent="." instance=ExtResource("45")]
position = Vector2(2312, -608)

[node name="Wind" parent="." instance=ExtResource("48")]
position = Vector2(3168, -704)
speed = Vector2(0, -89)
rectangle_extents = Vector2(1024, 128)
amplitude = 25.0
frequence = 1.1

[connection signal="activated_change_signal" from="Environment/Activables/Button0" to="Environment/Activables/Spawner" method="set_activated"]
[connection signal="activated_change_signal" from="Environment/Activables/Button1" to="Environment/Activables/Spawner2" method="set_activated"]
[connection signal="activated_change_signal" from="Environment/Activables/Button2" to="Environment/Activables/Spawner" method="set_activated"]
[connection signal="activated_change_signal" from="Environment/Activables/Button3" to="Environment/Dynamics/PipeBall2" method="toggle_activated"]
[connection signal="activated_change_signal" from="Environment/Activables/Button4" to="Environment/Interactive/Door2" method="set_activated"]
[connection signal="activated_change_signal" from="Environment/Activables/Button5" to="Environment/Interactive/Door2" method="set_activated"]
[connection signal="activated_change_signal" from="Environment/Activables/Button6" to="Environment/Interactive/Door2" method="set_activated"]
[connection signal="activated_change_signal" from="Environment/Activables/Button7" to="Environment/Activables/Spawner3" method="set_activated"]
